---
// JavaScript will be included for toggling menu functionality
import locationData from '../../data/locations.json';

// Use locations from the locations.json file
const locations = locationData.locations;
---

<div class="relative z-50 w-full flex items-center justify-end">
  <!-- Desktop Navigation -->
  <nav class="hidden md:flex space-x-8 justify-end">
      <div class="group relative">
          <a href="/events" class="text-white hover:text-blue-400 font-bold uppercase tracking-wide transition duration-150 ease-in-out py-1 flex items-center">
              Now in Brisbane
          </a>
      </div>
      <div class="group relative">
          <a href="/bne-insider" class="text-white hover:text-blue-400 font-bold uppercase tracking-wide transition duration-150 ease-in-out py-1 flex items-center">
              BNE Insider
          </a>
      </div>
      <div class="group relative">
          <a href="#" class="text-white hover:text-blue-400 font-bold uppercase tracking-wide transition duration-150 ease-in-out py-1 flex items-center">
              Eat & Drink
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
          </a>
          <div class="absolute right-0 mt-0 w-48 bg-slate-800 rounded-none shadow-lg py-2 z-10 hidden group-hover:block">
              <a href="/food-trucks" class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">Food Trucks</a>
          </div>
      </div>
      <div class="group relative">
          <a href="/where-to-stay" class="text-white hover:text-blue-400 font-bold uppercase tracking-wide transition duration-150 ease-in-out py-1 flex items-center">
              Where to Stay
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
          </a>
          <div class="absolute right-0 mt-0 w-64 bg-slate-800 rounded-none shadow-lg py-2 z-10 hidden group-hover:block">
              <a href="/where-to-stay" class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">Where to Stay in Brisbane</a>
              {locations.map((location) => (
                <a href={`/where-to-stay/${location.slug}`} class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">{location.name} Hotels</a>
              ))}
          </div>
      </div>
      <div class="group relative">
          <a href="#" class="text-white hover:text-blue-400 font-bold uppercase tracking-wide transition duration-150 ease-in-out py-1 flex items-center">
              Maps & Guides
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
          </a>
          <div class="absolute right-0 mt-0 w-48 bg-slate-800 rounded-none shadow-lg py-2 z-10 hidden group-hover:block">
              <!-- <a href="/maps" class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">Maps</a> -->
              <a href="/resources" class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">Resources</a>
              <!-- <a href="/guides" class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">Guides</a>
              <a href="/transportation" class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">Transportation</a> -->
              <a href="/parking-meters" class="block px-4 py-2 text-white hover:bg-blue-400 font-bold">Parking Meters</a>
          </div>
      </div>
  </nav>

  <!-- Mobile Menu Button -->
  <div class="md:hidden absolute z-50">
      <button onclick="toggleMobileMenu()" type="button" class="bg-black text-white border border-white hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400 rounded-md p-2" aria-label="Toggle Menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
      </button>
  </div>
</div>

<!-- Mobile Menu -->
<div id="mobile-menu" class="absolute w-full h-screen top-0 right-0 bg-black z-0 hidden mt-24">
    <div class="h-full overflow-y-auto">
        <nav aria-label="Mobile Navigation" class="px-6">
            <!-- Main navigation items with right chevron -->
            <div class="border-b border-gray-800">
                <a href="/events" class="flex justify-between items-center text-white text-2xl leading-tight font-bold py-5">
                    NOW IN BRISBANE
                </a>
            </div>
            
            <div class="border-b border-gray-800">
                <a href="/bne-insider" class="flex justify-between items-center text-white text-2xl leading-tight font-bold py-5">
                    BNE INSIDER
                </a>
            </div>
            
            <div class="border-b border-gray-800">
                <!-- Menu item with submenu -->
                <div class="mobile-menu-item">
                    <div class="flex justify-between items-center text-white text-2xl leading-tight font-bold py-5 cursor-pointer">
                        <span class="font-bold">EAT & DRINK</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="mobile-menu-arrow h-6 w-6 text-white transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="mobile-submenu hidden pl-4 pb-4">
                        <a href="/food-trucks" class="block text-white text-xl py-3 border-l-2 border-gray-700 pl-4 hover:border-blue-400 hover:text-blue-400 transition-colors">
                            Food Trucks
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-b border-gray-800">
                <!-- Menu item with submenu -->
                <div class="mobile-menu-item">
                    <div class="flex justify-between items-center text-white text-2xl leading-tight font-bold py-5 cursor-pointer">
                        <span class="font-bold">WHERE TO STAY</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="mobile-menu-arrow h-6 w-6 text-white transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="mobile-submenu hidden pl-4 pb-4">
                        <a href="/where-to-stay" class="block text-white text-xl py-3 border-l-2 border-gray-700 pl-4 hover:border-blue-400 hover:text-blue-400 transition-colors">
                            Where to Stay in Brisbane
                        </a>
                        {locations.map((location) => (
                          <a href={`/where-to-stay/${location.slug}`} class="block text-white text-xl py-3 border-l-2 border-gray-700 pl-4 hover:border-blue-400 hover:text-blue-400 transition-colors">
                              {location.name} Hotels
                          </a>
                        ))}
                    </div>
                </div>
            </div>
            
            <div class="border-b border-gray-800">
                <!-- Menu item with submenu -->
                <div class="mobile-menu-item">
                    <div class="flex justify-between items-center text-white text-2xl leading-tight font-bold py-5 cursor-pointer">
                        <span class="font-bold">MAPS & GUIDES</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="mobile-menu-arrow h-6 w-6 text-white transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="mobile-submenu hidden pl-4 pb-4">
                        <a href="/resources" class="block text-white text-xl py-3 border-l-2 border-gray-700 pl-4 hover:border-blue-400 hover:text-blue-400 transition-colors">
                            Resources
                        </a>
                        <a href="/parking-meters" class="block text-white text-xl py-3 border-l-2 border-gray-700 pl-4 hover:border-blue-400 hover:text-blue-400 transition-colors">
                            Parking Meters
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</div>

<script is:inline>
    function toggleMobileMenu() {
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenu) {
            mobileMenu.classList.toggle('hidden');
        }
    }

    // Close menu on window resize
    window.addEventListener('resize', () => {
        const mobileMenu = document.getElementById('mobile-menu');
        if (window.innerWidth >= 768 && mobileMenu && !mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.add('hidden');
        }
    });

    // Initialize mobile submenu functionality
    document.addEventListener('DOMContentLoaded', () => {
        const mobileMenuItems = document.querySelectorAll('.mobile-menu-item');
        
        mobileMenuItems.forEach(item => {
            const toggleButton = item.querySelector('.flex.justify-between');
            const submenu = item.querySelector('.mobile-submenu');
            const arrow = item.querySelector('.mobile-menu-arrow');
            
            toggleButton.addEventListener('click', () => {
                // Toggle submenu visibility
                submenu.classList.toggle('hidden');
                
                // Rotate arrow when expanded
                if (arrow.classList.contains('rotate-180')) {
                    arrow.classList.remove('rotate-180');
                } else {
                    arrow.classList.add('rotate-180');
                }
            });
        });
    });
</script>